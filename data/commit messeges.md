# commit messeges

# Оформление сообщений к коммитам

То, как написаны сообщения коммитов, тоже может подчиняться определённым правилам. Иногда эти правила продиктованы культурой команды, а иногда техническими ограничениями.

Например, в выводе команды `git log --oneline` умещается максимум 7272 первых символа сообщения, поэтому многие правила включают пункт: «Сообщение не должно быть длиннее 7272 символов».

В этом уроке рассмотрим несколько популярных подходов к оформлению сообщений коммитов. Но сначала разберём, почему такие сообщения важны и зачем соблюдать правила их оформления.

### Зачем вообще писать сообщения

У каждого коммита в Git есть сообщение — то, что передаётся после параметра `-m`. Например: `git commit -m "Добавить урок про оформление сообщений коммитов"`.

Сообщения коммитов можно сравнить с надписями на коробках в кладовке. Если надписей нет, то нужную коробку будет сложно найти: придётся заглянуть в каждую, чтобы понять, что там. А если надписи есть, то нужная найдётся сразу.

Как и надпись на коробке, сообщение коммита должно помочь определить, что внутри. Например, надпись на коробке «всякое разное» не очень полезная. Сообщение коммита «небольшие исправления» тоже: непонятно, что было исправлено в таком коммите и зачем.

Есть общие рекомендации по тому, как правильно составить сообщение. Оно должно быть:

- относительно коротким, чтобы его было легко прочитать;
- информативным.

Вот пример полезного сообщения в репозитории новостного сайта: `Исправление опечатки в заголовке главной страницы на хорватском`. Такое сообщение даёт много информации:

- `Исправление опечатки` значит, что исправлена ошибка, которая была допущена при наборе. Такое исправление не меняет смысл. То есть, например, главному редактору не нужно перепроверять этот заголовок.
- `На хорватском` говорит о том, что переводчикам на другие языки этот коммит можно смело пропускать.
- `В заголовке главной страницы` указывает, где произошли изменения. Если, например, кто-то зайдёт на сайт и ему не понравится новый заголовок, он легко найдёт по истории (`git log`) автора этого коммита и спросит у него, почему заголовок теперь такой.

Пример плохого сообщения для того же коммита: `Исправлена опечатка`. Это сообщение даёт мало информации. В такой коммит придётся «заглядывать» — разбираться, что именно поменялось и зачем.

Распределите сообщения к коммитам по группам.

**Информативные сообщения**

Оптимизирована загрузка фотографий в галерее

**Оптимизирована загрузка фотографий в галерее**

Исправлена ошибка # 123 123 для пользователей без отчества

**Исправлена ошибка #123123для пользователей без отчества**

Добавлена сортировка по полю «Сумма»

**Добавлена сортировка по полю «Сумма»**

Кнопка «Выход» сделана красной

**Кнопка «Выход» сделана красной**

**Неинформативные сообщения**

еЩё фИкСиКи

**еЩё фИкСиКи**

новые кнопки

**новые кнопки**

быстрофикс

**быстрофикс**

разные оптимизации

**разные оптимизации**

Лёхины вчерашние изменения, он в отпуске

**Лёхины вчерашние изменения, он в отпуске**

**Проверить**

Правильных ответов: 9, неправильных ответов: 0.

**Ответить повторно**

## Стили оформления

Все люди разные и у всех есть предпочтения — в том числе, как формулировать сообщения коммитов. Кто-то использует инфинитивы: `Исправить сообщение об ошибке E123`, кто-то — глаголы в прошедшем времени: `Исправил…`, кто-то — существительные: `Исправление…`.

Без единообразия коммитов нет и эффективной работы в Git. Это может показаться мелочью, но когда коммиты с сообщениями в разных стилях идут друг за другом, их может быть сложно читать.

Чтобы упростить работу, команды или даже целые компании часто договариваются об определённом стиле (то есть о правилах) оформления сообщений коммитов.

Например, правила могут быть такие:

- длина сообщения от 30 до 72 символов;
    
    30
    
    72
    
- первое слово — глагол в инфинитиве («исправить», «дополнить», «добавить» и другие);
- и так далее.

Есть много подходов к оформлению сообщений коммитов, но мы расскажем о нескольких популярных. Их используют как отдельные команды, так и целые проекты.

### Корпоративный

Во многих компаниях применяется Jira — система для организации проектов и задач. У каждой задачи в Jira есть идентификатор из нескольких заглавных латинских букв и номера. Например, `LGS-239` значит, что это 239239-я задача в проекте **LGS** (сокращение от англ. ***l**o**g**istic**s*** — «логистика»).

В корпоративном стиле в начале сообщения обычно указывают Jira-ID, а после — текст сообщения.

Скопировать кодBASH

```bash
$ git commit -m "LGS-239: Дополнить список пасхалок новыми числами"
```

Какие-то команды могут договариваться, с какой части речи начинать сообщение и какой длины оно должно быть, какие-то — нет. Но требование о наличии Jira-ID обычно строгое: оно позволяет автоматически связывать коммиты с задачами и проектами.

### Conventional Commits

![https://pictures.s3.yandex.net/resources/Artboard20120copy2010_1402x_1686137247.png](https://pictures.s3.yandex.net/resources/Artboard20120copy2010_1402x_1686137247.png)

Стандарт **Conventional Commits** (англ. «соглашение о коммитах») отличается качественной документацией и подробной проработкой. Он подходит для репозиториев с исходным кодом программ. Использовать его для других типов проектов (например, для перевода книги) было бы неудобно.

Conventional Commits предлагает такой формат коммита: `<type>: <сообщение>`. Первая часть `type` — это тип изменений. Таких типов достаточно много. Вот два примера:

- `feat` (сокращение от англ. *feature*) — для новой функциональности;
- `fix` (от англ. «исправить», «устранить») — для исправленных ошибок.

Более подробный список можно увидеть [на сайте с описанием этого стиля](https://www.conventionalcommits.org/ru/v1.0.0-beta.4/#%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F).

Например, сообщение может быть таким.

Скопировать кодBASH

```bash
git commit -m "feat: добавить подсчёт суммы заказов за неделю"
```

### GitHub-стиль

GitHub можно использовать не только для хранения файлов проекта, но и для ведения списка **задач** (англ. *issue*) этого проекта. Если коммит «закрывает» или «решает» какую-то задачу, то в его сообщении удобно указывать ссылку на неё. Для этого в любом месте сообщения нужно указать `#<номер задачи>`. Например, вот так.

Скопировать кодBASH

```bash
$ git commit -m "Исправить #334, добавить график температуры"
```

В таком случае GitHub свяжет коммит и задачу.

💡 **Инфинитив и императив**

Для сообщений на русском языке часто рекомендуют использовать инфинитивы. Например: `Добавить тесты для PipkaService`, `Исправить ошибку #123` и так далее.

Для сообщений на английском рекомендуется использовать **повелительное наклонение** (англ. *imperative*). Например: `Use library mega_lib_300`, `Fix exit button` и так далее.

Эти рекомендации сложились исторически, и им следуют многие проекты.

Практикум

Вася нашёл ошибку в логике обработки заказов: одному человеку может дважды прийти один и тот же заказ. Вася внёс исправление и теперь размышляет над сообщением для коммита. Какое сообщение ему стоит выбрать?

Савелий

Исправить повторную отправку заказов

Практикум

Петя работает над задачей BRO-13371337 в компании СербХет и уже почти закончил работу. Он добавил функцию по перекладыванию данных из Excel в Lotus-1-2-3. Как следует описать такой коммит?

Савелий

BRO-1337: Добавить перекладывание данных из экселя в лотус

Практикум

Лана решила помочь вам с проектом на GitHub и сделала исправление для уязвимости, которая описана в задаче 303303. Какое сообщение коммита вы бы предпочли увидеть?

Савелий

Fix #303, update bluelib dependency to version 4

Практикум

Работать над проектом с понятными сообщениями коммитов приятно!

**Начать диалог заново**

Отлично! Правильно описывать коммиты — искусство, к которому стоит приобщиться как можно раньше. Хорошо, когда:

- сообщение коммита легко читается;
- оно информативное;
- все сообщения оформлены в одном стиле.